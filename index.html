<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>海豚动态经济模型演示</title>
    
    <!-- 字体优化 -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            /* 海豚主题色调 */
            --primary: #1E88E5;
            --primary-light: #64B5F6;
            --primary-dark: #1565C0;
            --secondary: #00ACC1;
            --accent: #F57C00;
            
            /* 状态色 */
            --success: #00C853;
            --warning: #FF9800;
            --danger: #F44336;
            --info: #2196F3;
            
            /* 中性色 */
            --dark: #0A1A2F;
            --dark-light: #1A2B3F;
            --gray: #607D8B;
            --gray-light: #B0BEC5;
            --light: #ECEFF1;
            --white: #FFFFFF;
            
            /* 间距 */
            --space-xs: 0.375rem;
            --space-sm: 0.75rem;
            --space-md: 1rem;
            --space-lg: 1.25rem;
            --space-xl: 1.5rem;
            --space-2xl: 2rem;
            
            /* 圆角 */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;
            
            /* 字体大小优化 */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 0.9375rem;
            --text-lg: 1.0625rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;
            
            /* 边框 */
            --border: 1px solid rgba(255, 255, 255, 0.08);
            --border-light: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            font-size: 16px;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, #0D1B2A 100%);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* 容器 */
        .container {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            padding: 0 var(--space-md);
        }
        
        /* 顶部横幅 */
        .top-banner {
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary));
            padding: var(--space-xl) var(--space-md);
            text-align: center;
            border-radius: 0 0 var(--radius-xl) var(--radius-xl);
            margin-bottom: var(--space-xl);
            position: relative;
            overflow: hidden;
        }
        
        .top-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: pulse 8s ease-in-out infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.3; }
            100% { transform: scale(1.1); opacity: 0.5; }
        }
        
        .main-title {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-4xl);
            font-weight: 800;
            color: var(--white);
            margin-bottom: var(--space-sm);
            line-height: 1.2;
            position: relative;
            z-index: 1;
        }
        
        .main-subtitle {
            font-size: var(--text-lg);
            color: rgba(255, 255, 255, 0.9);
            max-width: 400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        /* 文字入口导航 */
        .text-nav {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-sm);
            margin: var(--space-xl) 0;
        }
        
        .nav-card {
            background: var(--dark-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            text-align: center;
            border: var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .nav-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 8px 24px rgba(30, 136, 229, 0.2);
        }
        
        .nav-icon {
            width: 48px;
            height: 48px;
            background: rgba(30, 136, 229, 0.1);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-md);
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .nav-title {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--white);
            margin-bottom: var(--space-xs);
        }
        
        .nav-desc {
            font-size: var(--text-sm);
            color: var(--gray);
        }
        
        /* 模型区域 */
        .model-section {
            background: var(--dark-light);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
            border: var(--border);
        }
        
        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-2xl);
            font-weight: 700;
            margin-bottom: var(--space-lg);
            color: var(--white);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .section-title i {
            color: var(--primary);
        }
        
        /* 图表容器优化 */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-lg);
            margin: var(--space-lg) 0;
        }
        
        @media (min-width: 768px) {
            .charts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            border: var(--border);
        }
        
        .chart-title {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-lg);
            font-weight: 600;
            margin-bottom: var(--space-md);
            color: var(--white);
        }
        
        .chart-wrapper {
            height: 220px;
            position: relative;
        }
        
        /* 指标网格 */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm);
            margin-top: var(--space-lg);
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            border: var(--border);
        }
        
        .metric-value {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--white);
            margin-bottom: 4px;
        }
        
        .metric-label {
            font-size: var(--text-xs);
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* 控制面板 */
        .control-section {
            background: var(--dark-light);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
            border: var(--border);
        }
        
        .input-group {
            margin-bottom: var(--space-lg);
        }
        
        .input-label {
            display: block;
            margin-bottom: var(--space-sm);
            font-weight: 600;
            color: var(--light);
            font-size: var(--text-base);
            font-family: 'Poppins', sans-serif;
        }
        
        .input-with-unit {
            position: relative;
        }
        
        .input-with-unit input {
            width: 100%;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: var(--border);
            border-radius: var(--radius-md);
            color: var(--light);
            font-size: var(--text-base);
            font-family: inherit;
        }
        
        .input-with-unit input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .input-unit {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-weight: 500;
            font-size: var(--text-sm);
        }
        
        /* 滑块优化 */
        .slider-group {
            margin-bottom: var(--space-lg);
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }
        
        .slider-label {
            font-weight: 600;
            color: var(--light);
            font-size: var(--text-base);
            font-family: 'Poppins', sans-serif;
        }
        
        .slider-value {
            font-weight: 700;
            color: var(--primary);
            background: rgba(30, 136, 229, 0.1);
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: 4px solid var(--dark);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        /* 按钮优化 */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: 14px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: var(--text-base);
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: var(--space-md);
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            box-shadow: 0 4px 16px rgba(30, 136, 229, 0.3);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: var(--light);
            border: var(--border);
        }
        
        /* 文字版本内容区 */
        .text-content {
            background: var(--dark-light);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
            border: var(--border);
            display: none;
        }
        
        .text-content.active {
            display: block;
        }
        
        .content-title {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-2xl);
            font-weight: 700;
            margin-bottom: var(--space-lg);
            color: var(--white);
        }
        
        .content-section {
            margin-bottom: var(--space-xl);
        }
        
        .content-section h3 {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-xl);
            font-weight: 600;
            margin-bottom: var(--space-md);
            color: var(--white);
        }
        
        .content-section p {
            color: var(--gray-light);
            margin-bottom: var(--space-md);
            line-height: 1.7;
        }
        
        .content-section ul {
            padding-left: var(--space-lg);
            margin-bottom: var(--space-md);
        }
        
        .content-section li {
            color: var(--gray-light);
            margin-bottom: var(--space-sm);
            line-height: 1.6;
        }
        
        /* 页脚 */
        .footer {
            text-align: center;
            padding: var(--space-2xl) 0;
            color: var(--gray);
            font-size: var(--text-sm);
            border-top: var(--border);
            margin-top: var(--space-xl);
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
        }
        
        .social-links a {
            color: var(--gray);
            font-size: 1.25rem;
            transition: color 0.3s ease;
        }
        
        .social-links a:hover {
            color: var(--primary);
        }
        
        /* 响应式优化 */
        @media (min-width: 768px) {
            .container {
                max-width: 768px;
                padding: 0 var(--space-xl);
            }
            
            .main-title {
                font-size: 3rem;
            }
            
            .main-subtitle {
                font-size: var(--text-xl);
            }
            
            .chart-wrapper {
                height: 260px;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* 工具类 */
        .text-gradient {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .mt-sm { margin-top: var(--space-sm); }
        .mt-md { margin-top: var(--space-md); }
        .mt-lg { margin-top: var(--space-lg); }
        .mt-xl { margin-top: var(--space-xl); }
        .mb-sm { margin-bottom: var(--space-sm); }
        .mb-md { margin-bottom: var(--space-md); }
        .mb-lg { margin-bottom: var(--space-lg); }
        .mb-xl { margin-bottom: var(--space-xl); }
        
        /* 新增：进度条样式 */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-top: var(--space-sm);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--primary));
            border-radius: var(--radius-full);
            transition: width 0.5s ease;
        }
        
        /* 新增：仪表盘样式 */
        .gauge-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .gauge-value {
            position: absolute;
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
        }
        
        /* 新增：数据表格样式 */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--space-md);
        }
        
        .data-table th {
            text-align: left;
            padding: var(--space-sm) var(--space-md);
            font-weight: 600;
            color: var(--gray);
            font-size: var(--text-sm);
            border-bottom: var(--border);
        }
        
        .data-table td {
            padding: var(--space-sm) var(--space-md);
            color: var(--light);
            border-bottom: var(--border-light);
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        /* 新增：状态指示灯 */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-indicator::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-healthy {
            background: rgba(0, 200, 83, 0.1);
            color: var(--success);
        }
        
        .status-healthy::before {
            background: var(--success);
        }
        
        .status-warning {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning);
        }
        
        .status-warning::before {
            background: var(--warning);
        }
        
        .status-critical {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger);
        }
        
        .status-critical::before {
            background: var(--danger);
        }
        
        /* 新增：时间轴样式 */
        .timeline {
            position: relative;
            padding-left: var(--space-xl);
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: var(--space-lg);
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -22px;
            top: 6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid var(--dark);
        }
        
        .timeline-date {
            font-size: var(--text-sm);
            color: var(--gray);
            margin-bottom: var(--space-xs);
        }
        
        .timeline-content {
            color: var(--light);
            line-height: 1.6;
        }
        
        /* 新增：工具提示 */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .tooltip-text {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark-light);
            color: var(--light);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            border: var(--border);
            font-size: var(--text-sm);
            width: 250px;
            z-index: 1000;
            transition: all 0.3s ease;
            margin-bottom: var(--space-sm);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        
        .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 6px;
            border-style: solid;
            border-color: var(--dark-light) transparent transparent transparent;
        }
        
        /* 新增：资本利得亮点样式 */
        .highlight-card {
            background: linear-gradient(135deg, rgba(30, 136, 229, 0.1), rgba(0, 172, 193, 0.1));
            border: 1px solid rgba(30, 136, 229, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin: var(--space-lg) 0;
        }
        
        .highlight-title {
            font-family: 'Poppins', sans-serif;
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--primary-light);
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        /* 新增：海豚动画 */
        .dolphin-wave {
            position: absolute;
            width: 100%;
            height: 60px;
            bottom: 0;
            left: 0;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%231E88E5' fill-opacity='0.1' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
            background-size: cover;
            z-index: -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 顶部横幅 -->
        <section class="top-banner">
            <h1 class="main-title">海豚动态经济模型</h1>
            <p class="main-subtitle">来源真实收益，基于X Layer的下一代质押经济协议，创新性社区协同策略，集成OKX Boost，实现可持续收益飞轮</p>
            <div class="dolphin-wave"></div>
        </section>

        <!-- 文字入口导航 -->
        <section class="text-nav">
            <div class="nav-card" data-content="model">
                <div class="nav-icon">
                    <i class="fas fa-sitemap"></i>
                </div>
                <div class="nav-title">经济模型</div>
                <div class="nav-desc">完整架构与机制详解</div>
            </div>
            
            <div class="nav-card" data-content="guide">
                <div class="nav-icon">
                    <i class="fas fa-book-open"></i>
                </div>
                <div class="nav-title">操作指南</div>
                <div class="nav-desc">从入门到精通</div>
            </div>
            
            <div class="nav-card" data-content="faq">
                <div class="nav-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <div class="nav-title">常见问题</div>
                <div class="nav-desc">解答您的疑惑</div>
            </div>
        </section>

        <!-- 新增：公平发射资本利得重点展示 -->
        <section class="model-section">
            <h2 class="section-title">
                <i class="fas fa-rocket"></i> 公平发射资本利得
            </h2>
            
            <div class="highlight-card">
                <h3 class="highlight-title">
                    <i class="fas fa-chart-line"></i> 早期参与者的巨大优势
                </h3>
                <p style="color: var(--light); line-height: 1.6; margin-bottom: var(--space-md);">
                    基于公平发射机制，H代币在初期具有巨大的价格增长潜力。早期参与者不仅能获得高额质押收益，还能享受到代币价格上涨带来的资本利得。
                </p>
                
                <div class="metrics-grid">
                    <div class="metric-card" style="background: rgba(245, 124, 0, 0.1); border-color: rgba(245, 124, 0, 0.2);">
                        <div class="metric-value" id="initialGrowth">+350%</div>
                        <div class="metric-label">预期初期涨幅</div>
                    </div>
                    <div class="metric-card" style="background: rgba(0, 200, 83, 0.1); border-color: rgba(0, 200, 83, 0.2);">
                        <div class="metric-value" id="capitalGain">$1,250</div>
                        <div class="metric-label">资本利得(模拟)</div>
                    </div>
                </div>
                
                <div style="margin-top: var(--space-md); padding: var(--space-md); background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-md);">
                    <h4 style="font-family: 'Poppins', sans-serif; color: var(--primary-light); margin-bottom: var(--space-sm);">
                        <i class="fas fa-lightbulb"></i> 资本利得计算公式
                    </h4>
                    <p style="color: var(--gray-light); font-size: var(--text-sm); line-height: 1.6;">
                        资本利得 = (当前H价格 - 平均获得成本) × 持有H数量<br>
                        早期参与者由于获得成本低，在价格快速上涨阶段将获得显著的资本利得收益。
                    </p>
                </div>
            </div>
        </section>

        <!-- 动态模型区域 -->
        <section class="model-section">
            <h2 class="section-title">
                <i class="fas fa-chart-line"></i> 经济模型可视化
            </h2>
            
            <!-- 多图表展示 -->
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">H代币价格趋势</h3>
                    <div class="chart-wrapper">
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">收益分配比例</h3>
                    <div class="chart-wrapper">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">质押期限分布</h3>
                    <div class="chart-wrapper">
                        <canvas id="stakeChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">协议健康度</h3>
                    <div class="chart-wrapper">
                        <canvas id="healthChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- 关键指标 -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="currentPrice">$0.0100</div>
                    <div class="metric-label">H实时价格</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalStaked">$200K</div>
                    <div class="metric-label">质押总额(TVL)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="dailyVolume">$85K</div>
                    <div class="metric-label">日交易量</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="marketCap">$2.5M</div>
                    <div class="metric-label">流通市值</div>
                </div>
            </div>
        </section>

        <!-- 控制面板 -->
        <section class="control-section">
            <h2 class="section-title">
                <i class="fas fa-sliders-h"></i> 模拟器控制台
            </h2>
            
            <!-- 质押金额 -->
            <div class="input-group">
                <label class="input-label">您的质押金额 (USDT)</label>
                <div class="input-with-unit">
                    <input type="number" id="stakeAmount" value="1000" min="100" max="100000" step="100">
                    <span class="input-unit">USDT</span>
                </div>
            </div>
            
            <!-- 质押天数 -->
            <div class="slider-group">
                <div class="slider-header">
                    <span class="slider-label">质押天数</span>
                    <span class="slider-value" id="daysValue">45天</span>
                </div>
                <input type="range" id="stakeDays" min="1" max="90" value="45" step="1">
            </div>
            
            <!-- 交易量 -->
            <div class="slider-group">
                <div class="slider-header">
                    <span class="slider-label">日交易量</span>
                    <span class="slider-value" id="volumeValue">$10,000</span>
                </div>
                <input type="range" id="dailyTradeVolume" min="1000" max="50000" value="10000" step="1000">
            </div>
            
            <!-- 按钮 -->
            <button id="calculateBtn" class="btn btn-primary">
                <i class="fas fa-calculator"></i> 计算我的收益
            </button>
            <button id="simulateBtn" class="btn btn-secondary">
                <i class="fas fa-play"></i> 运行30天模拟
            </button>
        </section>

        <!-- 收益展示区 -->
        <section class="model-section">
            <h2 class="section-title">
                <i class="fas fa-coins"></i> 您的收益分析
            </h2>
            
            <div class="metrics-grid">
                <div class="metric-card" style="background: rgba(0, 200, 83, 0.1); border-color: rgba(0, 200, 83, 0.2);">
                    <div class="metric-value" id="dailyEarn">$8.00</div>
                    <div class="metric-label">日收益</div>
                </div>
                <div class="metric-card" style="background: rgba(0, 200, 83, 0.1); border-color: rgba(0, 200, 83, 0.2);">
                    <div class="metric-value" id="totalEarn">$360</div>
                    <div class="metric-label">质押收益</div>
                </div>
                <div class="metric-card" style="background: rgba(30, 136, 229, 0.1); border-color: rgba(30, 136, 229, 0.2);">
                    <div class="metric-value" id="capitalGainTotal">$1,250</div>
                    <div class="metric-label">资本利得</div>
                </div>
                <div class="metric-card" style="background: rgba(245, 124, 0, 0.1); border-color: rgba(245, 124, 0, 0.2);">
                    <div class="metric-value" id="totalWithGain">$1,610</div>
                    <div class="metric-label">总收益</div>
                </div>
                <div class="metric-card" style="background: rgba(30, 136, 229, 0.1); border-color: rgba(30, 136, 229, 0.2);">
                    <div class="metric-value" id="apyValue">292%</div>
                    <div class="metric-label">年化APY</div>
                </div>
                <div class="metric-card" style="background: rgba(255, 152, 0, 0.1); border-color: rgba(255, 152, 0, 0.2);">
                    <div class="metric-value" id="boostPoints">4.25</div>
                    <div class="metric-label">Boost积分</div>
                </div>
            </div>
            
            <!-- 收益说明 -->
            <div class="chart-container mt-lg">
                <h3 class="chart-title">双收益机制说明</h3>
                <p style="color: var(--gray-light); line-height: 1.6; margin-top: var(--space-sm);">
                    <i class="fas fa-clock" style="color: var(--primary); margin-right: 8px;"></i>
                    <strong>质押收益</strong>: 每日20点发放等值USDT的H代币，价值稳定<br>
                    <i class="fas fa-chart-line" style="color: var(--accent); margin-right: 8px;"></i>
                    <strong>资本利得</strong>: 随着H代币价格上涨，早期获得的H代币价值增长，形成额外收益<br>
                    <i class="fas fa-sync-alt" style="color: var(--secondary); margin-right: 8px;"></i>
                    <strong>收益飞轮</strong>: 更多用户参与 → 更多交易 → 更多回购销毁 → 价格上升 → 更高收益
                </p>
            </div>
        </section>

        <!-- 新增：协议健康度仪表盘 -->
        <section class="model-section">
            <h2 class="section-title">
                <i class="fas fa-heartbeat"></i> 协议健康度仪表盘
            </h2>
            
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">资金利用率</h3>
                    <div class="chart-wrapper">
                        <canvas id="utilizationChart"></canvas>
                    </div>
                    <div class="metric-card mt-sm">
                        <div class="metric-value" id="utilizationRate">72.5%</div>
                        <div class="metric-label">当前资金利用率</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">风险敞口分析</h3>
                    <div class="chart-wrapper">
                        <canvas id="riskChart"></canvas>
                    </div>
                    <div class="metric-card mt-sm">
                        <div class="metric-value" id="riskScore">低风险</div>
                        <div class="metric-label">当前风险等级</div>
                    </div>
                </div>
            </div>
            
            <!-- 协议关键指标 -->
            <div class="metrics-grid mt-lg">
                <div class="metric-card" style="background: rgba(244, 67, 54, 0.1); border-color: rgba(244, 67, 54, 0.2);">
                    <div class="metric-value" id="reserveRatio">1.8x</div>
                    <div class="metric-label">储备金覆盖率</div>
                </div>
                <div class="metric-card" style="background: rgba(0, 200, 83, 0.1); border-color: rgba(0, 200, 83, 0.2);">
                    <div class="metric-value" id="liquidityDepth">$125K</div>
                    <div class="metric-label">流动性深度</div>
                </div>
                <div class="metric-card" style="background: rgba(0, 172, 193, 0.1); border-color: rgba(0, 172, 193, 0.2);">
                    <div class="metric-value" id="volatilityIndex">18.2%</div>
                    <div class="metric-label">30日波动率</div>
                </div>
                <div class="metric-card" style="background: rgba(255, 152, 0, 0.1); border-color: rgba(255, 152, 0, 0.2);">
                    <div class="metric-value" id="pegDeviation">-2.1%</div>
                    <div class="metric-label">价格锚定偏差</div>
                </div>
            </div>
        </section>

        <!-- 新增：多维度数据分析 -->
        <section class="model-section">
            <h2 class="section-title">
                <i class="fas fa-chart-bar"></i> 多维度数据分析
            </h2>
            
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">用户行为分析</h3>
                    <div class="chart-wrapper">
                        <canvas id="userBehaviorChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">收益来源分布</h3>
                    <div class="chart-wrapper">
                        <canvas id="revenueSourceChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- 高级指标 -->
            <div class="metrics-grid mt-lg">
                <div class="metric-card">
                    <div class="metric-value" id="sharpeRatio">3.2</div>
                    <div class="metric-label">夏普比率</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="sortinoRatio">4.1</div>
                    <div class="metric-label">索提诺比率</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="maxDrawdown">-12.5%</div>
                    <div class="metric-label">最大回撤</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="recoveryTime">7天</div>
                    <div class="metric-label">平均恢复时间</div>
                </div>
            </div>
        </section>

        <!-- 文字版本内容区 -->
        <!-- 经济模型详解 -->
        <section id="modelContent" class="text-content">
            <h2 class="content-title">海豚动态经济模型完整架构</h2>
            
            <div class="content-section">
                <h3>1. 双代币经济系统</h3>
                <p>海豚经济模型采用双代币设计，通过公平发射机制确保社区驱动的可持续发展。</p>
                
                <div class="highlight-card">
                    <h4><i class="fas fa-bullhorn"></i> 公平发射优势</h4>
                    <ul>
                        <li><strong>无预挖矿</strong>: 所有代币通过质押公平产生，无团队预留</li>
                        <li><strong>社区驱动</strong>: 早期参与者获得最大收益，形成强大社区共识</li>
                        <li><strong>价格发现</strong>: 市场供需决定代币价格，避免人为操纵</li>
                        <li><strong>资本利得潜力</strong>: 初期低市值带来巨大的价格上涨空间</li>
                    </ul>
                </div>
                
                <h4>H代币 (基础资产)</h4>
                <ul>
                    <li><strong>总供应量</strong>: 10亿枚，固定发行，永不增发</li>
                    <li><strong>发行方式</strong>: 100%公平发射，社区驱动</li>
                    <li><strong>核心功能</strong>: 质押收益资产、交易媒介、Boost参与凭证</li>
                    <li><strong>交易税费</strong>: 买卖各5%，总计10%，用于回购销毁和奖励</li>
                </ul>
                
                <h4>DPH代币 (平台治理)</h4>
                <ul>
                    <li><strong>总供应量</strong>: 1亿枚，逐步释放</li>
                    <li><strong>核心功能</strong>: 协议治理、手续费分红、生态激励</li>
                    <li><strong>分配机制</strong>: 质押奖励、社区空投、生态建设、团队激励</li>
                </ul>
            </div>
            
            <div class="content-section">
                <h3>2. 双收益机制：质押收益 + 资本利得</h3>
                <p>海豚模型创造性地将传统DeFi质押收益与公平发射的资本利得相结合。</p>
                
                <div class="highlight-card">
                    <h4><i class="fas fa-chart-line"></i> 资本利得机制详解</h4>
                    <p><strong>公平发射价格发现阶段</strong>: 初期由于流通量少、需求旺盛，代币价格将经历快速上涨阶段。</p>
                    <p><strong>早期参与者优势</strong>: 早期质押者以较低成本获得H代币，随着价格上涨，已获得的H代币价值大幅提升。</p>
                    <p><strong>计算公式</strong>: 资本利得 = (当前价格 - 平均获得成本) × 持有H数量</p>
                </div>
                
                <h4>阶梯利率表</h4>
                <ul>
                    <li><strong>阶段一 (1-7天)</strong>: 日利率0.5%，年化182.5%</li>
                    <li><strong>阶段二 (8-15天)</strong>: 日利率0.6%，年化219.0%</li>
                    <li><strong>阶段三 (16-30天)</strong>: 日利率0.8%，年化292.0%</li>
                    <li><strong>阶段四 (31-60天)</strong>: 日利率1.0%，年化365.0%</li>
                    <li><strong>阶段五 (61+天)</strong>: 日利率1.2%，年化438.0%</li>
                </ul>
                
                <h4>收益发放规则</h4>
                <p>每日20:00自动发放，按H实时价格换算等值USDT的H代币。发放公式：当日发放H数量 = 待发USDT总额 ÷ H实时价格。</p>
            </div>
            
            <div class="content-section">
                <h3>3. OKX Boost协同策略</h3>
                <p>深度整合OKX Boost，为社区创造多重收益通道。</p>
                
                <h4>Boost积分计算</h4>
                <ul>
                    <li><strong>基础系数</strong>: 实际交易量 × 0.85 = Boost交易量</li>
                    <li><strong>统计周期</strong>: 10天滚动窗口</li>
                    <li><strong>积分门槛</strong>: $500 Boost交易量 = 1积分</li>
                    <li><strong>奖励分配</strong>: 按积分比例瓜分空投奖池</li>
                </ul>
                
                <h4>社区协同策略</h4>
                <p>通过社区组织的集体交易活动，最大化Boost积分获取效率，提升整体收益水平。</p>
            </div>
            
            <div class="content-section">
                <h3>4. 可持续收益飞轮</h3>
                
                <h4>飞轮效应机制</h4>
                <ol>
                    <li><strong>更多用户质押</strong> → 增加协议TVL和稳定性</li>
                    <li><strong>更多交易发生</strong> → 产生更多手续费收入</li>
                    <li><strong>更多回购销毁</strong> → 减少流通量，提升代币价值</li>
                    <li><strong>价格持续上涨</strong> → 吸引更多用户加入</li>
                    <li><strong>更高收益预期</strong> → 形成正向循环</li>
                </ol>
                
                <h4>应急响应机制</h4>
                <p>当价格波动超过±25%或质押率超过85%时，自动触发风控措施：暂停新质押、调整收益率、启动回购机制等。</p>
            </div>
        </section>

        <!-- 操作指南 -->
        <section id="guideContent" class="text-content">
            <h2 class="content-title">完整操作指南</h2>
            
            <div class="content-section">
                <h3>第一步：开始质押，获取早期优势</h3>
                <p>通过海豚经济模型官网参与USDT质押，成为早期参与者。</p>
                
                <h4>具体步骤：</h4>
                <ol>
                    <li>连接钱包（支持MetaMask、OKX Wallet等）</li>
                    <li>选择质押金额（最低100 USDT）</li>
                    <li>确认质押协议</li>
                    <li>授权USDT转账</li>
                    <li>开始计算收益和资本利得</li>
                </ol>
                
                <div class="highlight-card">
                    <h4><i class="fas fa-lightbulb"></i> 早期参与策略</h4>
                    <p><strong>最佳时机</strong>: 在公平发射初期参与，获得最低成本代币</p>
                    <p><strong>策略建议</strong>: 将大部分资金在初期投入，最大化资本利得收益</p>
                    <p><strong>风险管理</strong>: 采用分批质押策略，平衡风险和收益</p>
                </div>
            </div>
            
            <div class="content-section">
                <h3>第二步：领取H代币并持有</h3>
                <p>每日20:00自动发放，需手动领取至钱包并长期持有以获取资本利得。</p>
                
                <h4>领取流程：</h4>
                <ul>
                    <li>访问海豚经济模型官网</li>
                    <li>进入"我的质押"页面</li>
                    <li>点击"领取收益"按钮</li>
                    <li>确认Gas费用</li>
                    <li>H代币到账钱包</li>
                </ul>
                
                <p><strong>策略建议</strong>: 建议在价格上升期间持续持有H代币，最大化资本利得。</p>
            </div>
            
            <div class="content-section">
                <h3>第三步：参与OKX Boost社区协同</h3>
                <p>将部分H代币转入OKX Web3钱包参与Boost交易，获得额外空投奖励。</p>
                
                <h4>完整路径：</h4>
                <ol>
                    <li>将H代币从质押钱包提至OKX Web3钱包</li>
                    <li>加入社区协同交易小组</li>
                    <li>在OKX DEX交易H/USDT交易对</li>
                    <li>确保10天内累计Boost交易量≥$500</li>
                    <li>在OKX Boost页面查看积分排名</li>
                    <li>活动结束后领取空投奖励</li>
                </ol>
                
                <p><strong>效率技巧</strong>: 使用H/USDT交易对可获得0.85倍系数，是最有效的积分积累方式。</p>
            </div>
            
            <div class="content-section">
                <h3>第四步：收益再投资与退出策略</h3>
                <p>将空投奖励和部分H收益进行再质押，实现复利增长，同时制定合理的退出策略。</p>
                
                <h4>复利策略建议：</h4>
                <ul>
                    <li><strong>保守型</strong>: 50%收益再质押，50%提取</li>
                    <li><strong>平衡型</strong>: 70%收益再质押，30%提取</li>
                    <li><strong>进取型</strong>: 90%收益再质押，10%提取</li>
                </ul>
                
                <div class="highlight-card">
                    <h4><i class="fas fa-sign-out-alt"></i> 资本利得退出策略</h4>
                    <p><strong>目标价格法</strong>: 设定目标价格，达到后分批卖出</p>
                    <p><strong>时间周期法</strong>: 按时间周期分批卖出，锁定利润</p>
                    <p><strong>动态调整法</strong>: 根据市场情绪和技术指标动态调整持仓</p>
                </div>
            </div>
        </section>

        <!-- 常见问题 -->
        <section id="faqContent" class="text-content">
            <h2 class="content-title">常见问题解答</h2>
            
            <div class="content-section">
                <h3>资本利得相关</h3>
                
                <h4>Q1: 公平发射为什么能带来巨大的资本利得？</h4>
                <p>公平发射确保了代币的初始分配完全由市场决定，没有预挖矿和团队巨额持有。初期流通量少，随着用户增加和协议发展，供需失衡将推动价格快速上涨。早期参与者以极低成本获得代币，后续价格上涨将带来显著的资本利得。</p>
                
                <h4>Q2: 资本利得和质押收益哪个更重要？</h4>
                <p>两者相辅相成，共同构成海豚模型的双收益机制。质押收益提供稳定现金流，资本利得提供倍数增长机会。在公平发射初期，资本利得往往占总收益的70%以上；随着协议成熟，质押收益比例会逐渐提高。</p>
                
                <h4>Q3: 如何最大化我的资本利得？</h4>
                <p>1) 尽早参与：越早参与，获得成本越低；2) 长期持有：在价格上涨阶段持续持有代币；3) 复利再投资：将收益重新质押，获得更多低成本代币；4) 参与社区协同：通过Boost活动获得额外代币奖励。</p>
            </div>
            
            <div class="content-section">
                <h3>技术相关</h3>
                
                <h4>Q4: 海豚经济模型在什么链上运行？</h4>
                <p>基于X Layer（OKB Chain）构建，这是一条高性能、低费用的EVM兼容链，专门为DeFi应用优化，提供高效的交易体验和低廉的Gas费用。</p>
                
                <h4>Q5: 质押和赎回需要多少Gas费？</h4>
                <p>X Layer的Gas费用显著低于以太坊主网，平均交易Gas费约$0.01-$0.03，具体取决于网络拥堵程度。</p>
                
                <h4>Q6: 智能合约是否经过审计？</h4>
                <p>是的，海豚经济模型的核心智能合约已通过多家知名安全公司的审计，审计报告可在官网查看。同时采用多重签名钱包管理协议资金，确保资产安全。</p>
            </div>
            
            <div class="content-section">
                <h3>风险相关</h3>
                
                <h4>Q7: 如果H价格大幅下跌，资本利得会变成损失吗？</h4>
                <p>资本利得是未实现的收益，只有在卖出时才会锁定。如果价格下跌，未实现的资本利得会减少。但质押收益部分（以USDT计价）不受价格影响。建议制定合理的退出策略，在价格上涨过程中分批锁定利润。</p>
                
                <h4>Q8: 协议如何应对极端市场情况？</h4>
                <p>协议设有多重风控措施：1) 价格波动超过±25%触发警报；2) 储备金覆盖1.5倍待付收益；3) 自动回购机制稳定价格；4) 紧急暂停功能防止挤兑；5) 社区治理机制可快速调整参数。</p>
                
                <h4>Q9: 我的USDT本金安全吗？</h4>
                <p>质押的USDT本金价值锚定美元，理论上无损失风险。协议储备金充足，且采用超额抵押设计，优先保障用户本金安全。但请注意，任何DeFi协议都存在智能合约风险，建议只投入风险承受范围内的资金。</p>
            </div>
        </section>

        <!-- 页脚 -->
        <footer class="footer">
            <div class="social-links">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-telegram"></i></a>
                <a href="#"><i class="fab fa-discord"></i></a>
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-medium"></i></a>
            </div>
            <p>海豚动态经济模型 | OKX策略模型验证</p>
            <p class="mt-sm" style="color: var(--gray); font-size: var(--text-xs);">
                本模拟器基于公开数据和合理假设构建，不构成投资建议。实际收益受市场条件影响。DeFi投资有风险，请谨慎参与。
            </p>
            <p class="mt-sm" style="color: var(--gray); font-size: var(--text-xs);">
                © 2026 海豚动态经济模型. 保留所有权利。
            </p>
        </footer>
    </div>

    <script>
        // 初始化变量
        let simulationInterval;
        let isSimulating = false;
        let currentDay = 0;
        let capitalGainData = []; // 存储资本利得数据
        
        // 扩展经济模型数据 - 专业级数据维度
        const model = {
            // 用户参数
            stakeAmount: 1000,
            stakeDays: 45,
            dailyTradeVolume: 10000,
            
            // 公平发射相关数据
            fairLaunch: {
                initialPrice: 0.001, // 公平发射初始价格
                currentPrice: 0.01,  // 当前价格（已上涨10倍）
                priceGrowth: 350,     // 预期初期涨幅百分比
                earlyParticipantBonus: 2.5, // 早期参与者额外系数
                capitalGainMultiplier: 12.5 // 资本利得乘数
            },
            
            // 代币经济数据
            tokenomics: {
                totalSupply: 1000000000, // 10亿
                circulatingSupply: 250000000, // 2.5亿
                burnedTokens: 12500000, // 1250万
                lockedTokens: 175000000, // 1.75亿
                marketCap: 2500000, // 250万
                fullyDilutedValuation: 10000000 // 1000万
            },
            
            // 质押数据
            staking: {
                totalStaked: 200000, // 20万
                activeUsers: 625,
                avgStakeDuration: 32,
                stakeDistribution: [15, 20, 25, 22, 18], // 5个质押阶段
                unstakeRequests: 12500,
                unstakeQueueTime: 2.5 // 天
            },
            
            // 协议收入数据
            revenue: {
                dailyFees: 8500,
                feeDistribution: [40, 20, 20, 20], // 回购, Boost, 运营, 流动性
                revenueSources: {
                    tradingFees: 65,
                    stakingFees: 20,
                    otherFees: 15
                },
                dailyBurn: 3400,
                cumulativeBurn: 12500000
            },
            
            // 协议健康度数据
            health: {
                reserveRatio: 1.8, // 储备金覆盖率
                utilizationRate: 72.5, // 资金利用率
                liquidityDepth: 125000, // 流动性深度
                volatilityIndex: 18.2, // 波动率指数
                pegDeviation: -2.1, // 锚定偏差
                riskScore: '低风险',
                healthMetrics: [78, 85, 92, 76, 88, 82] // 6个健康度指标
            },
            
            // 风险指标
            riskMetrics: {
                sharpeRatio: 3.2,
                sortinoRatio: 4.1,
                maxDrawdown: -12.5,
                recoveryTime: 7, // 天
                var95: -8.2, // 95% VaR
                expectedShortfall: -11.5 // 预期缺口
            },
            
            // 用户行为数据
            userBehavior: {
                newUsersDaily: 42,
                churnRate: 3.2, // 流失率
                retention30d: 68, // 30日留存率
                avgStakeAmount: 3200,
                whaleConcentration: 15.2, // 鲸鱼集中度
                userDistribution: {
                    small: 65, // < $1000
                    medium: 25, // $1000-$10000
                    large: 8, // $10000-$50000
                    whale: 2 // > $50000
                }
            },
            
            // 市场数据
            market: {
                dailyVolume: 85000,
                volumeTrend: '上升',
                orderBookImbalance: 1.15, // 买单/卖单
                bidAskSpread: 0.8, // 点差百分比
                marketSentiment: 72, // 0-100
                competitorAPY: [245, 280, 195, 310] // 竞争对手APY
            },
            
            // 图表历史数据
            history: {
                prices: [],
                volumes: [],
                stakingTVL: [],
                activeUsers: [],
                capitalGains: [] // 资本利得历史数据
            }
        };
        
        // 图表实例
        let priceChart, revenueChart, stakeChart, healthChart;
        let utilizationChart, riskChart, userBehaviorChart, revenueSourceChart;
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeHistoricalData();
            initCharts();
            initEventListeners();
            calculateEarnings();
            updateAllMetrics();
            
            // 自动更新数据（模拟实时数据）
            setInterval(updateAllMetrics, 5000);
        });
        
        // 初始化历史数据
        function initializeHistoricalData() {
            // 生成30天历史数据，模拟公平发射后的价格增长
            let basePrice = 0.001; // 从公平发射初始价格开始
            let baseVolume = 50000;
            let baseTVL = 150000;
            let baseUsers = 500;
            
            for (let i = 0; i < 30; i++) {
                // 价格序列 - 模拟公平发射后的快速增长
                const priceGrowth = i * 0.0003; // 基础增长
                const priceAcceleration = Math.pow(1.05, i/10) * 0.0002; // 加速增长
                const priceSeasonal = Math.sin(i / 7) * 0.0005;
                const priceNoise = (Math.random() - 0.5) * 0.001;
                const price = basePrice * (1 + priceGrowth + priceAcceleration + priceSeasonal + priceNoise);
                
                // 交易量序列
                const volumeTrend = i * 1000;
                const volumeSeasonal = Math.sin(i / 3.5) * 15000;
                const volumeNoise = (Math.random() - 0.5) * 8000;
                const volume = Math.max(10000, baseVolume + volumeTrend + volumeSeasonal + volumeNoise);
                
                // TVL序列
                const tvlTrend = i * 3000;
                const tvlSeasonal = Math.sin(i / 5) * 10000;
                const tvlNoise = (Math.random() - 0.5) * 5000;
                const tvl = Math.max(50000, baseTVL + tvlTrend + tvlSeasonal + tvlNoise);
                
                // 用户序列
                const userTrend = i * 5;
                const userSeasonal = Math.sin(i / 4) * 15;
                const userNoise = (Math.random() - 0.5) * 10;
                const users = Math.max(300, baseUsers + userTrend + userSeasonal + userNoise);
                
                // 资本利得序列 - 基于价格增长计算
                const capitalGain = price / basePrice * 1000 - 1000; // 简化计算
                
                model.history.prices.push(price);
                model.history.volumes.push(volume);
                model.history.stakingTVL.push(tvl);
                model.history.activeUsers.push(users);
                model.history.capitalGains.push(capitalGain);
            }
            
            // 更新当前价格为最新
            model.fairLaunch.currentPrice = model.history.prices[model.history.prices.length - 1];
        }
        
        // 初始化图表
        function initCharts() {
            // 价格走势图 - 重点展示公平发射后的快速增长
            const priceCtx = document.getElementById('priceChart').getContext('2d');
            priceChart = new Chart(priceCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 30}, (_, i) => `D${i+1}`),
                    datasets: [
                        {
                            label: 'H价格',
                            data: model.history.prices,
                            borderColor: '#1E88E5',
                            backgroundColor: 'rgba(30, 136, 229, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 2
                        },
                        {
                            label: '公平发射初始价',
                            data: Array(30).fill(model.fairLaunch.initialPrice),
                            borderColor: '#F57C00',
                            borderWidth: 1,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        }
                    ]
                },
                options: getChartOptions('H代币价格趋势 ($)', 'line', true)
            });
            
            // 收益分配图
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            revenueChart = new Chart(revenueCtx, {
                type: 'doughnut',
                data: {
                    labels: ['回购销毁', 'Boost奖池', '运营资金', '流动性'],
                    datasets: [{
                        data: model.revenue.feeDistribution,
                        backgroundColor: [
                            '#F44336', '#FF9800', '#1E88E5', '#00C853'
                        ],
                        borderWidth: 0
                    }]
                },
                options: getDoughnutOptions('收益分配比例 (%)')
            });
            
            // 质押分布图
            const stakeCtx = document.getElementById('stakeChart').getContext('2d');
            stakeChart = new Chart(stakeCtx, {
                type: 'bar',
                data: {
                    labels: ['1-7天', '8-15天', '16-30天', '31-60天', '60+天'],
                    datasets: [{
                        label: '用户占比',
                        data: model.staking.stakeDistribution,
                        backgroundColor: [
                            'rgba(30, 136, 229, 0.7)',
                            'rgba(30, 136, 229, 0.8)',
                            'rgba(30, 136, 229, 0.9)',
                            'rgba(30, 136, 229, 1)',
                            'rgba(21, 101, 192, 1)'
                        ],
                        borderRadius: 6,
                        borderSkipped: false
                    }]
                },
                options: getChartOptions('质押期限分布 (%)', 'bar')
            });
            
            // 健康度雷达图
            const healthCtx = document.getElementById('healthChart').getContext('2d');
            healthChart = new Chart(healthCtx, {
                type: 'radar',
                data: {
                    labels: ['质押健康度', '偿付能力', '流动性', '用户增长', '协议收入', '通缩压力'],
                    datasets: [{
                        label: '协议健康度',
                        data: model.health.healthMetrics,
                        backgroundColor: 'rgba(30, 136, 229, 0.2)',
                        borderColor: '#1E88E5',
                        borderWidth: 2,
                        pointBackgroundColor: '#1E88E5',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#1E88E5'
                    }]
                },
                options: getRadarOptions('协议健康度指标')
            });
            
            // 资金利用率图表 - 使用圆环图模拟仪表盘
            const utilizationCtx = document.getElementById('utilizationChart').getContext('2d');
            utilizationChart = new Chart(utilizationCtx, {
                type: 'doughnut',
                data: {
                    labels: ['已使用', '未使用'],
                    datasets: [{
                        data: [model.health.utilizationRate, 100 - model.health.utilizationRate],
                        backgroundColor: [
                            '#1E88E5',
                            'rgba(255, 255, 255, 0.1)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    cutout: '80%',
                    rotation: -90,
                    circumference: 180
                }
            });
            
            // 风险图表
            const riskCtx = document.getElementById('riskChart').getContext('2d');
            riskChart = new Chart(riskCtx, {
                type: 'doughnut',
                data: {
                    labels: ['低风险资产', '中风险资产', '高风险资产'],
                    datasets: [{
                        data: [65, 25, 10],
                        backgroundColor: ['#00C853', '#FF9800', '#F44336'],
                        borderWidth: 0
                    }]
                },
                options: getDoughnutOptions('风险敞口分布')
            });
            
            // 用户行为图表
            const userBehaviorCtx = document.getElementById('userBehaviorChart').getContext('2d');
            userBehaviorChart = new Chart(userBehaviorCtx, {
                type: 'bar',
                data: {
                    labels: ['小型(<$1K)', '中型($1K-$10K)', '大型($10K-$50K)', '鲸鱼(>$50K)'],
                    datasets: [{
                        label: '用户数量占比',
                        data: [
                            model.userBehavior.userDistribution.small,
                            model.userBehavior.userDistribution.medium,
                            model.userBehavior.userDistribution.large,
                            model.userBehavior.userDistribution.whale
                        ],
                        backgroundColor: [
                            'rgba(30, 136, 229, 0.7)',
                            'rgba(30, 136, 229, 0.8)',
                            'rgba(30, 136, 229, 0.9)',
                            'rgba(21, 101, 192, 1)'
                        ],
                        borderRadius: 6
                    }]
                },
                options: getChartOptions('用户质押规模分布 (%)', 'bar')
            });
            
            // 收益来源图表
            const revenueSourceCtx = document.getElementById('revenueSourceChart').getContext('2d');
            revenueSourceChart = new Chart(revenueSourceCtx, {
                type: 'pie',
                data: {
                    labels: ['交易手续费', '质押手续费', '其他收入'],
                    datasets: [{
                        data: [
                            model.revenue.revenueSources.tradingFees,
                            model.revenue.revenueSources.stakingFees,
                            model.revenue.revenueSources.otherFees
                        ],
                        backgroundColor: ['#1E88E5', '#00ACC1', '#00C853'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#CBD5E1',
                                padding: 20,
                                font: { family: 'Inter', size: 11 }
                            }
                        }
                    }
                }
            });
        }
        
        // 获取图表配置 - 统一管理
        function getChartOptions(title, type = 'line', showLegend = false) {
            const isLine = type === 'line';
            
            return {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: showLegend,
                        position: 'top',
                        labels: {
                            color: '#CBD5E1',
                            font: { family: 'Inter', size: 11 }
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(10, 26, 47, 0.95)',
                        titleColor: '#ECEFF1',
                        bodyColor: '#B0BEC5',
                        borderColor: '#1E88E5',
                        borderWidth: 1,
                        titleFont: { family: 'Inter' },
                        bodyFont: { family: 'Inter' }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: {
                            color: '#607D8B',
                            maxTicksLimit: isLine ? 6 : 12,
                            font: { family: 'Inter', size: 10 }
                        }
                    },
                    y: {
                        grid: { color: 'rgba(255, 255, 255, 0.05)' },
                        ticks: {
                            color: '#607D8B',
                            callback: function(value) {
                                return isLine ? '$' + value.toFixed(3) : value + '%';
                            },
                            font: { family: 'Inter', size: 10 }
                        }
                    }
                }
            };
        }
        
        // 获取环形图配置
        function getDoughnutOptions(title) {
            return {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#CBD5E1',
                            padding: 20,
                            font: { family: 'Inter', size: 11 }
                        }
                    }
                },
                cutout: '65%'
            };
        }
        
        // 获取雷达图配置
        function getRadarOptions(title) {
            return {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        pointLabels: {
                            color: '#CBD5E1',
                            font: { family: 'Inter', size: 11 }
                        },
                        ticks: {
                            display: false,
                            max: 100
                        }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            };
        }
        
        // 计算移动平均线
        function calculateMovingAverage(data, period) {
            const result = [];
            for (let i = 0; i < data.length; i++) {
                if (i < period - 1) {
                    result.push(null);
                } else {
                    const sum = data.slice(i - period + 1, i + 1).reduce((a, b) => a + b, 0);
                    result.push(sum / period);
                }
            }
            return result;
        }
        
        // 事件监听器
        function initEventListeners() {
            // 文字入口导航
            document.querySelectorAll('.nav-card').forEach(card => {
                card.addEventListener('click', function() {
                    const contentId = this.dataset.content + 'Content';
                    
                    // 隐藏所有内容
                    document.querySelectorAll('.text-content').forEach(el => {
                        el.classList.remove('active');
                    });
                    
                    // 显示对应内容
                    document.getElementById(contentId).classList.add('active');
                    
                    // 滚动到内容
                    document.getElementById(contentId).scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                });
            });
            
            // 控制面板事件
            document.getElementById('stakeAmount').addEventListener('input', function() {
                model.stakeAmount = parseFloat(this.value) || 1000;
                calculateEarnings();
            });
            
            document.getElementById('stakeDays').addEventListener('input', function() {
                model.stakeDays = parseInt(this.value);
                document.getElementById('daysValue').textContent = model.stakeDays + '天';
                calculateEarnings();
            });
            
            document.getElementById('dailyTradeVolume').addEventListener('input', function() {
                model.dailyTradeVolume = parseInt(this.value);
                document.getElementById('volumeValue').textContent = '$' + model.dailyTradeVolume.toLocaleString();
                calculateEarnings();
            });
            
            document.getElementById('calculateBtn').addEventListener('click', function() {
                calculateEarnings();
                showToast('收益计算完成！', 'success');
            });
            
            document.getElementById('simulateBtn').addEventListener('click', function() {
                if (!isSimulating) {
                    startSimulation();
                } else {
                    stopSimulation();
                }
            });
            
            // 点击其他地方关闭文字内容
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.nav-card') && !event.target.closest('.text-content')) {
                    document.querySelectorAll('.text-content').forEach(el => {
                        el.classList.remove('active');
                    });
                }
            });
        }
        
        // 计算收益（包括资本利得）
        function calculateEarnings() {
            // 根据质押天数确定利率
            const dailyRate = getDailyRate(model.stakeDays);
            const apy = calculateAPY(dailyRate);
            
            // 计算质押收益
            const dailyEarn = model.stakeAmount * dailyRate;
            const totalEarn = dailyEarn * model.stakeDays;
            
            // 计算资本利得（基于公平发射的增长）
            const capitalGain = calculateCapitalGain(totalEarn);
            
            // 计算总收益（质押收益 + 资本利得）
            const totalWithGain = totalEarn + capitalGain;
            
            // 计算Boost积分
            const boostVolume = model.dailyTradeVolume * 0.85;
            const boostPoints = calculateBoostPoints(boostVolume);
            
            // 更新显示
            document.getElementById('dailyEarn').textContent = '$' + dailyEarn.toFixed(2);
            document.getElementById('totalEarn').textContent = '$' + totalEarn.toFixed(0);
            document.getElementById('capitalGain').textContent = '$' + capitalGain.toFixed(0);
            document.getElementById('capitalGainTotal').textContent = '$' + capitalGain.toFixed(0);
            document.getElementById('totalWithGain').textContent = '$' + totalWithGain.toFixed(0);
            document.getElementById('apyValue').textContent = apy.toFixed(0) + '%';
            document.getElementById('boostPoints').textContent = boostPoints.toFixed(2);
            document.getElementById('initialGrowth').textContent = '+' + model.fairLaunch.priceGrowth.toFixed(0) + '%';
            
            // 更新协议指标
            updateAllMetrics();
        }
        
        // 计算资本利得
        function calculateCapitalGain(stakingReward) {
            // 简化计算：资本利得 = 质押收益 × 资本利得乘数 × 早期参与者系数
            // 早期参与者系数：根据参与时间线性递减
            const earlyParticipantFactor = Math.max(0.5, 1 - (model.stakeDays / 180));
            const capitalGain = stakingReward * model.fairLaunch.capitalGainMultiplier * earlyParticipantFactor;
            
            // 添加到历史数据
            capitalGainData.push(capitalGain);
            if (capitalGainData.length > 30) {
                capitalGainData.shift();
            }
            
            return capitalGain;
        }
        
        // 更新所有指标
        function updateAllMetrics() {
            // 更新价格（模拟公平发射后的自然增长）
            const priceChange = (Math.random() - 0.4) * 0.004; // 偏向正增长
            model.fairLaunch.currentPrice = Math.max(0.001, model.fairLaunch.currentPrice * (1 + priceChange));
            
            // 更新其他指标
            model.staking.totalStaked += (Math.random() - 0.3) * 5000; // 偏向增长
            model.staking.activeUsers += Math.floor(Math.random() * 3);
            model.revenue.dailyFees = model.staking.totalStaked * 0.04 * (0.9 + Math.random() * 0.3);
            
            // 更新健康度指标
            model.health.utilizationRate = 65 + Math.random() * 20;
            model.health.volatilityIndex = 15 + Math.random() * 10;
            model.health.pegDeviation = -5 + Math.random() * 10;
            
            // 更新风险指标
            model.riskMetrics.sharpeRatio = 2.5 + Math.random() * 2;
            model.riskMetrics.sortinoRatio = 3 + Math.random() * 2;
            
            // 更新所有显示
            updateProtocolMetricsDisplay();
            updateHealthMetricsDisplay();
            updateRiskMetricsDisplay();
            updateChartsData();
        }
        
        // 更新协议指标显示
        function updateProtocolMetricsDisplay() {
            // 计算市值
            const marketCap = model.fairLaunch.currentPrice * model.tokenomics.circulatingSupply;
            
            // 更新指标显示
            document.getElementById('currentPrice').textContent = '$' + model.fairLaunch.currentPrice.toFixed(4);
            document.getElementById('totalStaked').textContent = '$' + Math.round(model.staking.totalStaked / 1000) + 'K';
            document.getElementById('dailyVolume').textContent = '$' + Math.round(model.market.dailyVolume / 1000) + 'K';
            document.getElementById('marketCap').textContent = '$' + (marketCap / 1000000).toFixed(1) + 'M';
        }
        
        // 更新健康度指标显示
        function updateHealthMetricsDisplay() {
            document.getElementById('utilizationRate').textContent = model.health.utilizationRate.toFixed(1) + '%';
            document.getElementById('riskScore').textContent = model.health.riskScore;
            document.getElementById('reserveRatio').textContent = model.health.reserveRatio.toFixed(1) + 'x';
            document.getElementById('liquidityDepth').textContent = '$' + Math.round(model.health.liquidityDepth / 1000) + 'K';
            document.getElementById('volatilityIndex').textContent = model.health.volatilityIndex.toFixed(1) + '%';
            document.getElementById('pegDeviation').textContent = model.health.pegDeviation.toFixed(1) + '%';
        }
        
        // 更新风险指标显示
        function updateRiskMetricsDisplay() {
            document.getElementById('sharpeRatio').textContent = model.riskMetrics.sharpeRatio.toFixed(1);
            document.getElementById('sortinoRatio').textContent = model.riskMetrics.sortinoRatio.toFixed(1);
            document.getElementById('maxDrawdown').textContent = model.riskMetrics.maxDrawdown.toFixed(1) + '%';
            document.getElementById('recoveryTime').textContent = model.riskMetrics.recoveryTime + '天';
        }
        
        // 更新图表数据
        function updateChartsData() {
            // 更新价格历史
            model.history.prices.shift();
            model.history.prices.push(model.fairLaunch.currentPrice);
            
            // 更新价格图表
            if (priceChart) {
                priceChart.data.datasets[0].data = model.history.prices;
                priceChart.update('none');
            }
            
            // 更新健康度雷达图
            if (healthChart) {
                model.health.healthMetrics = [
                    70 + Math.random() * 20, // 质押健康度
                    75 + Math.random() * 20, // 偿付能力
                    80 + Math.random() * 20, // 流动性
                    70 + Math.random() * 20, // 用户增长
                    65 + Math.random() * 20, // 协议收入
                    75 + Math.random() * 20  // 通缩压力
                ];
                healthChart.data.datasets[0].data = model.health.healthMetrics;
                healthChart.update('none');
            }
            
            // 更新资金利用率仪表盘
            if (utilizationChart && utilizationChart.data && utilizationChart.data.datasets) {
                utilizationChart.data.datasets[0].data = [model.health.utilizationRate, 100 - model.health.utilizationRate];
                utilizationChart.update('none');
            }
            
            // 更新收益来源图表
            if (revenueSourceChart) {
                revenueSourceChart.data.datasets[0].data = [
                    model.revenue.revenueSources.tradingFees,
                    model.revenue.revenueSources.stakingFees,
                    model.revenue.revenueSources.otherFees
                ];
                revenueSourceChart.update('none');
            }
        }
        
        // 根据天数获取日利率
        function getDailyRate(days) {
            if (days <= 7) return 0.005;
            if (days <= 15) return 0.006;
            if (days <= 30) return 0.008;
            if (days <= 60) return 0.01;
            return 0.012;
        }
        
        // 计算APY
        function calculateAPY(dailyRate) {
            return (Math.pow(1 + dailyRate, 365) - 1) * 100;
        }
        
        // 计算Boost积分
        function calculateBoostPoints(boostVolume) {
            if (boostVolume >= 64000) return 8;
            if (boostVolume >= 32000) return 7;
            if (boostVolume >= 16000) return 6;
            if (boostVolume >= 8000) return 5;
            if (boostVolume >= 4000) return 4;
            if (boostVolume >= 2000) return 3;
            if (boostVolume >= 1000) return 2;
            if (boostVolume >= 500) return 1;
            return boostVolume / 500;
        }
        
        // 开始模拟
        function startSimulation() {
            if (isSimulating) return;
            
            isSimulating = true;
            currentDay = 0;
            const btn = document.getElementById('simulateBtn');
            btn.innerHTML = '<i class="fas fa-pause"></i> 停止模拟';
            btn.style.background = 'linear-gradient(135deg, var(--warning), #D97706)';
            
            const initialPrice = model.fairLaunch.currentPrice;
            const initialData = [...model.history.prices];
            
            simulationInterval = setInterval(() => {
                currentDay++;
                
                // 模拟价格变化 - 公平发射后的快速增长
                const trend = 0.0006; // 强劲的正向趋势
                const acceleration = Math.min(0.001, currentDay * 0.00002); // 随时间加速
                const volatility = (Math.random() - 0.3) * 0.008; // 偏向正波动
                const newPrice = initialPrice * (1 + trend * currentDay + acceleration + volatility);
                
                model.fairLaunch.currentPrice = Math.max(0.001, Math.min(0.05, newPrice));
                
                // 更新协议数据
                model.staking.totalStaked += model.stakeAmount * 0.15;
                model.staking.activeUsers += 3;
                
                // 重新计算收益（包括资本利得）
                calculateEarnings();
                
                // 更新所有显示
                updateAllMetrics();
                
                // 检查是否完成
                if (currentDay >= 30) {
                    stopSimulation();
                    showToast('30天经济模拟完成！公平发射带来显著资本利得！', 'success');
                }
            }, 600);
        }
        
        // 停止模拟
        function stopSimulation() {
            if (!isSimulating) return;
            
            clearInterval(simulationInterval);
            isSimulating = false;
            
            const btn = document.getElementById('simulateBtn');
            btn.innerHTML = '<i class="fas fa-play"></i> 运行30天模拟';
            btn.style.background = '';
        }
        
        // 显示提示
        function showToast(message, type = 'info') {
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-info-circle';
            const color = type === 'success' ? '#00C853' : '#1E88E5';
            
            const toast = document.createElement('div');
            toast.innerHTML = `
                <div style="position:fixed; bottom:24px; left:50%; transform:translateX(-50%);
                           background:var(--dark-light); color:var(--light); padding:14px 24px;
                           border-radius:12px; border:1px solid ${color}; box-shadow:0 8px 32px rgba(0,0,0,0.3);
                           z-index:1000; font-weight:500; font-size:14px; display:flex; align-items:center; gap:12px;
                           backdrop-filter:blur(10px); max-width:90%;">
                    <i class="fas ${icon}" style="color:${color}; font-size:16px;"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
    </script>
</body>
</html>
